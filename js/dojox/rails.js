/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is a compiled version of Dojo, built for deployment and not for
	development. To get an editable version, please visit:

		http://dojotoolkit.org

	for documentation and information on getting the source.
*/

if(!dojo._hasResource["dojox.rails._base.strings"]){dojo._hasResource["dojox.rails._base.strings"]=true;dojo.provide("dojox.rails._base.strings");(function(){var dr=dojox.rails;dr.camelize=function(_1,_2){var s="";var _3=_2===undefined?true:_2;for(var i=0;i<_1.length;i++){var c=_1.charAt(i);if(_3&&c!="_"){s+=c.toUpperCase();_3=false;continue;}if(c=="_"){_3=true;continue;}s+=c;}return s;};})();}if(!dojo._hasResource["dojox.rails._base.parser"]){dojo._hasResource["dojox.rails._base.parser"]=true;dojo.provide("dojox.rails._base.parser");(function(){var dr=dojox.rails;var d=dojo;dr.manager={_map:{},register:function(_4,_5){this._map[_4]=this._map[_4]||[];this._map[_4].push(_5);},all:function(){var _6=[];for(var _7 in this._map){_6=_6.concat(this._map[_7]);}return _6;},byNode:function(_8){_8=dojo.byId(_8);if(!_8){return null;}var _9=this.findByType(dojo.attr(_8,"data-js-type"));for(var i=0;i<_9.length;i++){var _a=_9[i];if(_8==_a.domNode){return _a;}}return null;},clear:function(){this._map={};},findByType:function(_b){return this._map[_b]||[];}};dr.parse=function(){var _c=d.query("*[data-js-type]");d.forEach(_c,function(_d){var _e=_d.tagName.toLowerCase();var _f=dojo.attr(_d,"data-js-type");var _10=dojo.attr(_d,"type");var _11=dr._resolveClassName(_e,_f,_10);d.require("dojox.rails.decorators."+_11);dr.manager.register(_f,new dr.decorators[_11](_d));});};dr._resolveClassName=function(tag,_12,_13){var _14;if(tag=="script"){_14=dr.camelize(_12);}else{var _15={"a":"Link"};var _16=null;if(_15[tag]){_16=_15[tag];}else{if(_13){_16=_13;}else{_16=tag;}}_14=dr.camelize(_12+"_"+_16);}return _14;};if(d.config.parseOnLoad){d.addOnLoad(function(){dr.parse();});}dr.AttributeParser={TrueFalse:function(v){return v=="true"||v==true;},ThrowUnsupported:function(v){throw new Error("'data-"+v+"' is unsupported");},Code:function(v){return eval("("+v+")");},Float:function(v){return parseFloat(v);}};})();}if(!dojo._hasResource["dojox.rails._base"]){dojo._hasResource["dojox.rails._base"]=true;dojo.provide("dojox.rails._base");}if(!dojo._hasResource["dojox.rails"]){dojo._hasResource["dojox.rails"]=true;dojo.provide("dojox.rails");}if(!dojo._hasResource["dojox.rails.listeners"]){dojo._hasResource["dojox.rails.listeners"]=true;dojo.provide("dojox.rails.listeners");dojo.declare("dojox.rails.listeners.Listener",null,{constructor:function(_17,_18){this._callback=_17;},trigger:function(){this._callback();},listen:function(){},stop:function(){}});dojo.declare("dojox.rails.listeners.TimerListener",dojox.rails.listeners.Listener,{constructor:function(_19,_1a){this._period=_1a;},listen:function(){this._interval=setInterval(dojo.hitch(this,"trigger"),this._period);},stop:function(){clearInterval(this._interval);}});dojo.declare("dojox.rails.listeners.ElementChangeListener",dojox.rails.listeners.Listener,{constructor:function(_1b,_1c){this._element=dojo.byId(_1c);this._connect=null;},listen:function(){var el=this._element;var _1d=(el.type||"").toLowerCase();if(_1d==""){throw new Error("Invalid type for element: "+el.constructor.toString()+".\tDid you forget to specify an input type in your markup?");}var _1e;switch(el.type){case "checkbox":case "radio":_1e="onclick";break;default:_1e="onchange";}this._connect=dojo.connect(el,_1e,this,"trigger");},stop:function(){dojo.disconnect(this._connect);}});dojo.declare("dojox.rails.listeners.FormChangeListener",dojox.rails.listeners.Listener,{constructor:function(_1f,_20){this._form=dojo.byId(_20);this._listeners=[];},listen:function(){var cb=dojo.hitch(this,"trigger");dojo.forEach(this._form.elements,function(_21){var _22=new dojox.rails.listeners.ElementChangeListener(cb,_21);this._listeners.push(_22);_22.listen();},this);},stop:function(){dojo.forEach(this._listeners,function(_23){_23.stop();});this._listeners=[];}});}if(!dojo._hasResource["dojox.rails.decorators.common"]){dojo._hasResource["dojox.rails.decorators.common"]=true;dojo.provide("dojox.rails.decorators.common");dojo.declare("dojox.rails.decorators.Base",null,{constructor:function(_24){this.domNode=dojo.byId(_24);},throwUnimplemented:function(_25){throw new Error(_25+": not implemented");}});dojo.declare("dojox.rails.decorators.ArgMap",null,{constructor:function(_26){this._mappings=_26;},getMappingKeys:function(){var _27=[];for(var _28 in this._mappings){_27.push(_28);}return _27;},map:function(_29){var _2a={};for(var _2b in _29){if(!this._mappings[_2b]){continue;}var _2c=this._mappings[_2b];var v=_29[_2b];if(dojo.isArray(_2c)){_2a[_2c[0]]=_2c[1](v);}else{if(dojo.isFunction(_2c)){_2a[_2b]=_2c(v);}else{_2a[_2c.toString()]=v;}}}return _2a;}});}if(!dojo._hasResource["dojox.rails.decorators.Request"]){dojo._hasResource["dojox.rails.decorators.Request"]=true;dojo.provide("dojox.rails.decorators.Request");dojo.declare("dojox.rails.decorators.Request",dojox.rails.decorators.Base,{constructor:function(_2d){this._connects=[];this._requestArgs={};var _2e=this._parseAttributes(this.domNode);var _2f=this._mapAttributes(_2e,dojox.rails.decorators._CallbackMap);this._requestArgs=this._mapAttributes(_2e,dojox.rails.decorators._RequestArgMap);this._connectHandlers(_2f);},onSuccess:function(_30,_31){},onFailure:function(_32,_33){},onComplete:function(_34,_35){},getMethod:function(){return this._requestArgs.method||"get";},setMethod:function(_36){this._requestArgs.method=_36.toLowerCase();},exec:function(url,_37){_37=_37||{};if(url){_37.url=url;}var _38=this._argsToDojo(_37);var _39=dojo["xhr"+dojox.rails.camelize(this.getMethod(),true)];if(_39){_39(_38);}else{dojo.xhr(this.getMethod(),_38);}},_parseAttributes:function(_3a){var _3b=_3a.attributes;var _3c={};for(var i=0;i<_3b.length;i++){if(!_3b[i]){continue;}var _3d=_3b[i].name.match(/^data-(.*)/);if(_3d&&_3d.length>1){_3c[_3d[1]]=dojo.attr(_3a,_3b[i].name);}}return _3c;},_mapAttributes:function(_3e,_3f){return _3f.map(_3e);},_connectHandlers:function(_40){var _41=["onSuccess","onFailure","onComplete"];dojo.forEach(_41,function(h){if(!_40[h]){return;}this._connects.push(dojo.connect(this,h,this,_40[h]));},this);},_argsToDojo:function(_42){var _43={},drd=dojox.rails.decorators;var _44={load:this.onSuccess,error:this.onFailure,handle:this.onComplete};dojo.mixin(_43,_44);dojo.mixin(_43,this._requestArgs);dojo.mixin(_43,_42);return _43;}});(function(){var drd=dojox.rails.decorators;var _45=dojox.rails.AttributeParser;drd._CallbackMap=new drd.ArgMap({"uninitialized-code":_45.ThrowUnsupported,"loading-code":_45.ThrowUnsupported,"loaded-code":_45.ThrowUnsupported,"interactive-code":_45.ThrowUnsupported,"create-code":_45.ThrowUnsupported,"complete-code":["onComplete",_45.Code],"failure-code":["onFailure",_45.Code],"success-code":["onSuccess",_45.Code]});drd._RequestArgMap=new drd.ArgMap({"url":"url","method":function(v){return v.toLowerCase();},"params":["content",function(v){return dojo.isObject(v)?v:dojo.queryToObject(v);}],"sync":_45.TrueFalse,"eval":["evalScripts",_45.TrueFalse]});})();}if(!dojo._hasResource["dojox.rails.decorators.Updater"]){dojo._hasResource["dojox.rails.decorators.Updater"]=true;dojo.provide("dojox.rails.decorators.Updater");dojo.declare("dojox.rails.decorators.Updater",dojox.rails.decorators.Request,{STRIP_REGEXP:new RegExp("<script[^>]*>([\\S\\s]*?)</script>","img"),constructor:function(_46){this._updaterArgs={};var _47=this._parseAttributes(this.domNode);this._updaterArgs=this._mapAttributes(_47,dojox.rails.decorators._UpdaterArgMap);this._connectUpdateHandlers();},_connectUpdateHandlers:function(){if(this._updaterArgs.successQuery){dojo.connect(this,"onSuccess",this,"_handleSuccess");}if(this._updaterArgs.failureQuery){dojo.connect(this,"onFailure",this,"_handleFailure");}if(this._updaterArgs.completeQuery){dojo.connect(this,"onComplete",this,"_handleComplete");}},_handleSuccess:function(_48,_49){this._handle(_48,_49,this._updaterArgs.successQuery);},_handleFailure:function(_4a,_4b){this._handle(_4a,_4b,this._updaterArgs.failureQuery);},_handleComplete:function(_4c,_4d){this._handle(_4c,_4d,this._updaterArgs.completeQuery);},_handle:function(_4e,_4f,_50){var _51=null;var _52=_4e.status==null?_4e.toString():_4e.responseText;var _53=this._updaterArgs.evalScripts;if(_53){_51=this._grepScripts(_52);}_52=this._strippedContent(_52);this._placeHTML(_50,_52);if(_53){this._evalScripts(_51);}},_placeHTML:function(_54,_55){var nl=dojo.query(_54);nl.forEach(function(_56){dojo.place("<!-- dojo.place hack -->"+_55,_56,this._updaterArgs.place);},this);},_grepScripts:function(_57){var _58=[];dojo.forEach(this.STRIP_REGEXP.exec(_57),function(_59,i){if(i>0){_58.push(_59);}});return _58;},_strippedContent:function(_5a){return _5a.replace(this.STRIP_REGEXP,"");},_evalScripts:function(_5b){if(!_5b){return;}dojo.forEach(_5b,function(_5c){if(_5c){eval(_5c);}});}});(function(){var drd=dojox.rails.decorators;var _5d=dojox.rails.AttributeParser;var _5e={"top":"first","bottom":"last","before":"before","after":"after"};drd._UpdaterArgMap=new drd.ArgMap({"position":["place",function(v){return _5e[v];}],"update-success":"successQuery","update-failure":"failureQuery","update-complete":"completeQuery","eval":["evalScripts",_5d.TrueFalse]});})();}if(!dojo._hasResource["dojox.rails.decorators.Observer"]){dojo._hasResource["dojox.rails.decorators.Observer"]=true;dojo.provide("dojox.rails.decorators.Observer");dojo.declare("dojox.rails.decorators.Observer",dojox.rails.decorators.Updater,{constructor:function(_5f){this._observerArgs={};var _60=this._parseAttributes(this.domNode);this._observerArgs=this._mapAttributes(_60,dojox.rails.decorators._ObserverArgMap);this._listener=null;this.register();this._lastValue=this.getValue();},register:function(){this._register(this._observerArgs.frequency,this._observerArgs.observed);},listenerClass:function(){this.throwUnimplemented("listenerClass");},compare:function(_61,_62){this.throwUnimplemented("compare");},getValue:function(){this.throwUnimplemented("getValue");},onObservation:function(_63,_64){if(this._observerArgs.callback){this._observerArgs.callback(_63,_64);}},onEvent:function(){var v=this.getValue();if(this.compare(v,this._lastValue)){this.onObservation(v,this._lastValue);this._lastValue=v;}},registerListener:function(_65,arg){var _66=dojo.hitch(this,"onEvent");if(this._listener){this._listener.stop();}this._listener=new _65(_66,arg);this._listener.listen();},getObserved:function(){return dojo.byId(this._observerArgs.observed);},getListener:function(){return this._listener;},destroy:function(){if(this._listener){this._listener.stop();}this._listener=null;this._observerArgs=null;this._lastValue=null;},_register:function(_67,_68){if(_67){this.registerListener(dojox.rails.listeners.TimerListener,_67);}else{this.registerListener(this.listenerClass(),_68);}}});(function(){var drd=dojox.rails.decorators;var _69=dojox.rails.AttributeParser;drd._ObserverArgMap=new drd.ArgMap({"observed":"observed","observer-code":["callback",_69.Code],"frequency":["frequency",function(v){return _69.Float(v)*1000;}]});})();}if(!dojo._hasResource["dojox.rails.decorators.FieldObserver"]){dojo._hasResource["dojox.rails.decorators.FieldObserver"]=true;dojo.provide("dojox.rails.decorators.FieldObserver");dojo.declare("dojox.rails.decorators.FieldObserver",dojox.rails.decorators.Observer,{listenerClass:function(){return dojox.rails.listeners.ElementChangeListener;},compare:function(_6a,_6b){return _6a!=_6b;},onObservation:function(_6c,_6d){if(this._observerArgs.callback){this._observerArgs.callback(_6c,_6d);}else{var o={};o[this._observerArgs.observed]=_6c;this.exec(null,{content:o});}},getValue:function(){this._target=this._target||dojo.byId(this._observerArgs.observed);return dojo.fieldToObject(this._target);}});}if(!dojo._hasResource["dojox.rails.decorators.FormObserver"]){dojo._hasResource["dojox.rails.decorators.FormObserver"]=true;dojo.provide("dojox.rails.decorators.FormObserver");dojo.declare("dojox.rails.decorators.FormObserver",dojox.rails.decorators.Observer,{listenerClass:function(){return dojox.rails.listeners.FormChangeListener;},compare:function(_6e,_6f){if(dojo.isString(_6e)){if(!dojo.isString(_6f)){return true;}return _6e!=_6f;}if(dojo.isArray(_6e)){if(!dojo.isArray(_6f)||_6e.length!=_6f.length){return true;}for(var i=0;i<_6e.length;++i){if(this.compare(_6e[i],_6f[i])){return true;}}return false;}if(dojo.isObject(_6e)){if(!dojo.isObject(_6f)){return true;}var _70=[];for(var _71 in _6e){_70.push(_71);if(this.compare(_6e[_71],_6f[_71])){return true;}}for(var i=0;i<_70.length;++i){var key=_70[i];if(_6f[key]===undefined){return true;}}return false;}return _6e!=_6f;},onObservation:function(_72,_73){if(this._observerArgs.callback){this._observerArgs.callback(_72,_73);}else{this.exec(null,{content:_72});}},getValue:function(){this._target=this._target||dojo.byId(this._observerArgs.observed);return dojo.formToObject(this._target);}});}if(!dojo._hasResource["dojox.rails.decorators.RemoteLink"]){dojo._hasResource["dojox.rails.decorators.RemoteLink"]=true;dojo.provide("dojox.rails.decorators.RemoteLink");dojo.declare("dojox.rails.decorators.RemoteLink",dojox.rails.decorators.Updater,{constructor:function(_74){var _75=dojo.attr(this.domNode,"href");if(!this._requestArgs.url&&_75){this._requestArgs.url=_75;}this._connectRemoteHandlers();},onClick:function(evt){this._submit();evt.preventDefault();},destroy:function(){dojo.forEach(this._connects,function(c){dojo.disconnect(c);});},_submit:function(){this.exec();},_connectRemoteHandlers:function(){this._connects.push(dojo.connect(this.domNode,"onclick",this,"onClick"));}});}if(!dojo._hasResource["dojox.rails.decorators.RemoteButton"]){dojo._hasResource["dojox.rails.decorators.RemoteButton"]=true;dojo.provide("dojox.rails.decorators.RemoteButton");dojo.declare("dojox.rails.decorators.RemoteButton",dojox.rails.decorators.RemoteLink,{});}if(!dojo._hasResource["dojox.rails.decorators.RemoteSubmit"]){dojo._hasResource["dojox.rails.decorators.RemoteSubmit"]=true;dojo.provide("dojox.rails.decorators.RemoteSubmit");dojo.declare("dojox.rails.decorators.RemoteSubmit",dojox.rails.decorators.RemoteButton,{_submit:function(){var o=dojo.formToObject(this.domNode.form);this.exec(null,{content:o});}});}if(!dojo._hasResource["dojox.rails.decorators.RemoteForm"]){dojo._hasResource["dojox.rails.decorators.RemoteForm"]=true;dojo.provide("dojox.rails.decorators.RemoteForm");dojo.declare("dojox.rails.decorators.RemoteForm",dojox.rails.decorators.Updater,{constructor:function(_76){var _77=dojo.attr(this.domNode,"action");var _78=dojo.attr(this.domNode,"method");if(!this._requestArgs.url&&_77){this._requestArgs.url=_77;}if(_78){this.setMethod(_78);}this._connectRemoteHandlers();},_connectRemoteHandlers:function(){this._connects.push(dojo.connect(this.domNode,"onsubmit",this,"onSubmit"));},onSubmit:function(evt){this._submit();dojo.stopEvent(evt);},destroy:function(){dojo.forEach(this._connects,function(c){dojo.disconnect(c);});},_submit:function(){var o=dojo.formToObject(this.domNode);this.exec(null,{content:o});}});}if(!dojo._hasResource["dojox.rails.decorators.PeriodicalExecuter"]){dojo._hasResource["dojox.rails.decorators.PeriodicalExecuter"]=true;dojo.provide("dojox.rails.decorators.PeriodicalExecuter");dojo.declare("dojox.rails.decorators.PeriodicalExecuter",[dojox.rails.decorators.Updater],{constructor:function(_79){var _7a=this._parseAttributes(this.domNode);this._executerArgs=this._mapAttributes(_7a,dojox.rails.decorators._ExecuterArgMap);this.register();},register:function(){this._register(this._executerArgs.frequency);},onEvent:function(){this.exec();},getListener:function(){return this._listener;},_register:function(_7b){var _7c=dojo.hitch(this,"onEvent");this._listener=new dojox.rails.listeners.TimerListener(_7c,_7b);this._listener.listen();},destroy:function(){if(this._listener){this._listener.stop();}}});(function(){var drd=dojox.rails.decorators;var _7d=dojox.rails.AttributeParser;drd._ExecuterArgMap=new drd.ArgMap({"frequency":["frequency",function(v){return _7d.Float(v)*1000;}]});})();}
